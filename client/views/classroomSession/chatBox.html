<template name='chatBox'>
  <div class="chat-box-container">

    <div class="chat-messages">
      {{> chatMessages}}
    </div>

    <div class="input-chat-message-container">
      {{> chatMessageContainer}}
    </div>
  </div>
</template>

<template name="chatMessageContainer">
  {{> incomingCallContainer}}

  <textarea rows="4" class='input-chat-message'></textarea><br>

  <div class="audio-call-container">
    {{> audioCallContainer}}
  </div>  
</template>

<template name="incomingCallContainer">
  {{#if incomingAudioCall}}
    <div class="incoming-audio-call-overlay"></div>
    <div class="incoming-audio-call-popup">
      <div class="audio-call-logo">Icon</div>
      <div class="accept-incoming-audio-call yellow-button">
        Answer
      </div>
      <div class="decline-button">Decline</div>
    </div>
  {{/if}}
</template>

<template name="audioCallContainer">
  {{#if defaultAudioCall }}
    <button type="button" class="btn btn-default start-call">Start call</button>
  {{else}} {{#if awaitingReplyForAudioCall }}
    <div> Awaiting reply </div>
  {{else}} {{#if inAudioCall }}
    <button type="button" class="btn btn-default end-call">End call</button>
  {{/if}} {{/if}} {{/if}}  
</template>

<template name="chatMessages">
  {{#if areMessagesReady }}

    <div>
      Now chatting with {{chatPartner}}. Say hi!
    </div>

    {{#each messages}}
      {{> chatMessage}}
    {{/each}}

  {{else}}
    Loading...
  {{/if}}
</template>

<template name='chatMessage'>

  {{#if isNormalMessage}}
    <div>
      <b>{{user.name}}:</b> {{message}}
    </div>
  {{else}}
    <div>
      <i>{{message}}</i>
    </div>
  {{/if}}
</template>